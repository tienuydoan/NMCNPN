<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Chat AI - Chat</title>
    <link rel="stylesheet" href="css/style.css?v=2">
    <link rel="stylesheet" href="css/chat.css?v=2">
</head>
<body class="chat-body">
    <!-- Header -->
    <div class="chat-header">
        <div class="header-left">
            <h1 class="chat-logo">üó£Ô∏è English Chat AI</h1>
        </div>
        <div class="header-right">
            <span id="user-name"></span>
            <button class="btn-icon" onclick="logout()" title="ƒêƒÉng xu·∫•t">
                üö™
            </button>
        </div>
    </div>
    
    <div class="chat-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <button class="btn btn-primary" onclick="createNewConversation()">
                ‚ûï Cu·ªôc h·ªôi tho·∫°i m·ªõi
            </button>
            
            <div class="conversation-list" id="conversation-list">
                <!-- Conversations will be loaded here -->
            </div>
        </div>
        
        <!-- Chat Area -->
        <div class="chat-area">
            <!-- Welcome Screen -->
            <div id="welcome-screen" class="welcome-screen">
                <h2>üëã Ch√†o m·ª´ng ƒë·∫øn v·ªõi English Chat AI!</h2>
                <p>B·∫Øt ƒë·∫ßu cu·ªôc h·ªôi tho·∫°i m·ªõi ƒë·ªÉ luy·ªán t·∫≠p ti·∫øng Anh</p>
            </div>
            
            <!-- Chat Screen -->
            <div id="chat-screen" class="chat-screen" style="display: none;">
                <!-- Messages Container -->
                <div class="messages-container" id="messages-container">
                    <!-- Messages will be loaded here -->
                </div>
                
                <!-- Input Area -->
                <div class="input-area">
                    <div class="input-controls">
                        <button class="btn-icon" id="mic-btn" onclick="toggleRecording()" title="Ghi √¢m">
                            üé§
                        </button>
                        <input type="text" id="message-input" placeholder="Nh·∫≠p tin nh·∫Øn..." 
                               onkeypress="handleKeyPress(event)">
                        <button class="btn-icon" onclick="sendTextMessage()" title="G·ª≠i">
                            ‚û§
                        </button>
                    </div>
                    <div class="input-options">
                        <button class="btn-voice-mode" id="voice-mode-btn" onclick="toggleVoiceMode()" title="B·∫Øt ƒë·∫ßu ch·∫ø ƒë·ªô h·ªôi tho·∫°i li√™n t·ª•c">
                            <span class="voice-icon">‚ñ∂</span>
                            <span class="voice-text">Voice Mode</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Vocabulary Modal -->
    <div id="vocab-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="modal-close" onclick="closeVocabModal()">√ó</span>
            <h3 id="vocab-word"></h3>
            <div id="vocab-pronunciation"></div>
            <div id="vocab-meaning"></div>
            <audio id="vocab-audio" controls style="display: none;"></audio>
            <button class="btn btn-primary" onclick="playVocabAudio()">üîä Nghe ph√°t √¢m</button>
        </div>
    </div>
    
    <!-- Audio Recording Modal -->
    <div id="recording-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h3>üé§ ƒêang ghi √¢m...</h3>
            <p>Nh·∫•n n√∫t ƒë·ªÉ d·ª´ng ghi √¢m</p>
            <button class="btn btn-primary" onclick="stopRecording()">‚èπ D·ª´ng ghi √¢m</button>
        </div>
    </div>
    
    <!-- Transcript Edit Modal -->
    <div id="transcript-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h3>‚úèÔ∏è Ch·ªânh s·ª≠a vƒÉn b·∫£n</h3>
            <textarea id="transcript-text" rows="4"></textarea>
            <div class="modal-buttons">
                <button class="btn btn-primary" onclick="sendEditedTranscript()">G·ª≠i</button>
                <button class="btn btn-secondary" onclick="closeTranscriptModal()">H·ªßy</button>
            </div>
        </div>
    </div>
    
    <script src="js/api.js?v=2"></script>
    <script src="js/utils.js?v=2"></script>
    <script src="js/audio.js?v=2"></script>
    <script src="js/chat.js?v=2"></script>
</body>
</html>
